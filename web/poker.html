<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Blind Supervision</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="bootstrap.css">
    <link rel="stylesheet" href="poker.css">


      <!-- used for paper_elements -->
      <script src="packages/web_components/platform.js"></script>
      <script src="packages/web_components/dart_support.js"></script>

      <link rel="import" href="packages/paper_elements/paper_button.html">
      <link rel="import" href="packages/paper_elements/paper_shadow.html">
      <link rel="import" href="packages/paper_elements/paper_input.html">
      <link rel="import" href="packages/paper_elements/roboto.html">

  </head>
  <body ng-app>
    <div ng-hide="true">Please hold while we connect you with one of our operators...</div>

    <div class="clearfix" id="blindSupervision" poker-controller ng-cloak>

      <!-- Current Level -->
      <div class="levelWrapper clearfix">
        <paper-shadow z="5"></paper-shadow>
        <div class="levelNumber"><span class="levelNumberSpan">{{controller.currentLevel +1}}</span></div>
        <div class="countdownArea">
          <countdown class="countdown" ng-unless="controller.isSuddenDeath"
            start-time="controller.levelLength"
            is-running="controller.isRunning"
    	    on-countdown-complete="controller.onLevelComplete()">
          </countdown>
          <audio id="timer-alert" src="audio/Alarm-Positive.wav" preload="auto"></audio>

            <h1 id="suddenDeath" ng-if="controller.isSuddenDeath">Sudden Death</h1>
        </div>

        <blind class="blind" blind="controller.currentBlind"></blind>
      </div>


      <!-- Next Level -->
      <div class="levelWrapper roundCorners clearfix" style="width: 80%;"
           ng-unless="controller.isLastLevel">
          <paper-shadow z="3"></paper-shadow>
        <div class="levelNumber"><span class="levelNumberSpan">{{controller.currentLevel +2}}</span></div>
        <div class="countdownArea">
          <h1>{{controller.levelLength}}:00</h1>
        </div>
        
        <blind class="blind" style="font-size: .8em" blind="controller.nextBlind"></blind>   
      </div>

        <div ng-unless="controller.isSuddenDeath">
            <paper-button raisedbutton="true" class="colored paperButton mainButton" tabindex="1"
                          label="{{ controller.controlText }}"
                          ng-click=" controller.toggleTimer() "></paper-button>
            <paper-button raisedbutton="true" class="colored paperButton mainButton" tabindex="2"
                          label="Reset"
                          ng-click=" controller.resetLevel() "></paper-button>
        </div>

      <div class="chipsWrapper roundCorners clearfix" style="width: 80%;">
        <paper-shadow z="1"></paper-shadow>
        <chip class="chip" chips="controller.chips"></chip>
      </div>

      <!-- Maybe admin area can be it's own component ?? -->
      <div style="margin-left:5px;">
        <div style="text-align:left;">
          <a ng-click="controller.toggleAdminArea()" style="color: #F1D129;" href="#">Administration</a>
        </div>
        <div id="adminArea" hidden style="text-align: left;">

          <!-- need to try to hide this and add our own button:
          http://www.shauninman.com/archive/2007/09/10/styling_file_inputs_with_css_and_the_dom
          http://stackoverflow.com/questions/3956286/how-to-remove-text-field-from-html-file-input
          -->
            <h2>Import Schedule</h2>
            <div>
                From File: <input type="file" id="upload" ng-change="controller.onFileLoad()"/>
            </div>
            <div class="row" ng-unless="controller.noAvailableSchedules()">
                <div class="col-sm-3">
                    <label for="scheduleNameDropDown">From Server</label>
                </div>
                <div  class="col-sm-2">
                    <select class="form-control" ng-model="controller.selectedServerSchedule" id="scheduleNameDropDown" >
                        <option ng-repeat="scheduleName in controller.savedScheduleNames" ng-value="scheduleName">{{scheduleName}}</option>
                    </select>
                </div>
                <div class="col-sm-2">
                    <paper-button label="load" class="colored" ng-click="controller.loadScheduleFromServer()"></paper-button>
                </div>
            </div>
            <br/>
            <div class="row">
                <div class="col-sm-3">
                    <label for="saveScheduleAsName">Save Current Schedule as</label>
                </div>
                <div class="col-sm-2">
<!--                    <paper-input id="scheduleNameInput" floatingLabel="true" label="Save Current Schedule as..." ng-model="controller.nameToSaveScheduleAs"></paper-input> -->
                    <input class="form-control" type="text" ng-model="controller.nameToSaveScheduleAs" id="saveScheduleAsName">
                </div>
                <div class="col-sm-2">
                    <paper-button label="Save" class="colored" ng-disabled="controller.disableSaveToServerButton()" ng-click="controller.saveScheduleToServer()"></paper-button>
                </div>
            </div>
        </div>
      </div>


      <br /><br />
      <div id="title">Blind Supervision</div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <script src="https://cdn.firebase.com/v0/firebase.js"></script>


    <script type="application/dart" src="poker.dart"></script>
    <script src="packages/browser/dart.js"></script>
  </body>
</html>
